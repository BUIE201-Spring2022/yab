<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>09972675dff64c89ba09d0fc34a74baf</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="cell markdown">
<p><strong>IE 423: QUALITY ENGINEERING</strong></p>
<p><strong>Project Part 1</strong></p>
<p><img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image5.png" alt="" width="400" height="400"></p>
<p><strong>Instructor:</strong> Mustafa Baydoğan</p>
<p><strong>Date of Submission:</strong> 02.11.23</p>
<p><strong>Prepared by:</strong></p>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Student ID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>İbrahim Emre Köksal</td>
<td>2019402171</td>
</tr>
<tr class="even">
<td>Yusuf Ali Bozkurt</td>
<td>2019402021</td>
</tr>
<tr class="odd">
<td>İdil Zeynep Ceylan</td>
<td>2020402033</td>
</tr>
</tbody>
</table>
</div>
<div class="cell markdown">
<p><strong>Introduction</strong></p>
<p>For the sake of the analysis, the data in the wide format is chosen
where rows represent date &amp; time and columns represent different
stocks. In this structure, closing prices of the same stock in different
moments of time are listed in the same column. This version is chosen
since this structure makes it easier to carry out operations such as
filtering, aggregating and transforming on large amounts of data.</p>
<p>50 different companies, which are publicly traded in Borsa İstanbul,
are provided to examine stock prices. Akbank(AKBNK) and Garanti(GARAN)
are chosen from the banking, Türk Hava Yolları(THYAO) and Pegasus(PGSUS)
are chosen from the aviation, Aselsan(ASELS) is chosen from the defense
industry and the Banvit(BANVT) is chosen from the food industry to be
able to comprehend different sectors. Also, some comparisons were made
to clearly observe trend effects.</p>
<p>(<a
href="https://www.thedataschool.com.au/mipadmin/the-shape-of-data-long-vs-wide/"
class="uri">https://www.thedataschool.com.au/mipadmin/the-shape-of-data-long-vs-wide/</a>)</p>
</div>
<div class="cell code"
data-vscode="{&quot;languageId&quot;:&quot;r&quot;}">
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>library(zoo)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>library(lubridate)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>library(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>library(ggplot2)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming your DataFrame is named &quot;data&quot; and the timestamp column is named &quot;timestamp&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>data <span class="op">&lt;-</span> read.csv(<span class="st">&quot;Desktop/all_ticks_wide.csv.gz&quot;</span>,sep <span class="op">=</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#AKBANK</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming your DataFrame is named &quot;data&quot; and the timestamp column is named &quot;timestamp&quot;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>akbank <span class="op">&lt;-</span> data[,c(<span class="st">&quot;timestamp&quot;</span>,<span class="st">&quot;AKBNK&quot;</span>)]</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>akbank2yil <span class="op">&lt;-</span> akbank[<span class="dv">1883</span>:<span class="dv">22132</span>,]</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>akbank2yil$AKBNK <span class="op">&lt;-</span> na.approx(akbank2yil$AKBNK)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># A function to approximate na&#39;s in data</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(<span class="kw">is</span>.na(akbank2yil$timestamp))</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the month and year</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>akbank2yil <span class="op">&lt;-</span> akbank2yil <span class="op">%&gt;%</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  mutate(year <span class="op">=</span> year(timestamp), month <span class="op">=</span> month(timestamp))</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Create separate boxplots for each combination of month and year</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>ggplot(akbank2yil, aes(x <span class="op">=</span> factor(month, labels <span class="op">=</span> month.abb), y <span class="op">=</span> AKBNK)) <span class="op">+</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  geom_boxplot() <span class="op">+</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  labs(x <span class="op">=</span> <span class="st">&quot;Month&quot;</span>, y <span class="op">=</span> <span class="st">&quot;AKBNK&quot;</span>) <span class="op">+</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  facet_wrap(<span class="op">~</span>year, scales <span class="op">=</span> <span class="st">&quot;free_x&quot;</span>)</span></code></pre></div>
</div>
<div class="cell markdown">
<p><strong>Results:</strong></p>
<h1 id="boxplots-for-akbank-for-january-2013-december-2015--">Boxplots
for Akbank for January 2013-December 2015: <br></h1>
<p><img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image3.png" alt="" width="900" height="450"></p>
<p>The decline at the end of 2013 in Akbank stock prices is likely due
to a number of factors including the global financial crisis, the
political uncertainty in Turkey, and the depreciation of the Turkish
lira. In 2013, a total of 418 million dollars of net foreign outflow was
observed from the Borsa Istanbul. The highest net sales by foreign
investors were in the Banking Index, with 1.221 billion dollars. Foreign
investors who had 20% share in the total trading volume of the BIST all,
held a 66% share in the market value at the end of 2012, but this share
fell to 63% at the end of 2013. The Borsa Istanbul, which finished 2012
as the second-best performing stock market in the world, ended 2013 with
a 23% decline in market value in dollar terms, diverging negatively from
global markets. (<a
href="https://www.bloomberght.com/haberler/haber/1495099-bistten-2013te-418-milyon-dolar-yabanci-cikisi-oldu"
class="uri">https://www.bloomberght.com/haberler/haber/1495099-bistten-2013te-418-milyon-dolar-yabanci-cikisi-oldu</a>)</p>
<p>In 2013, Turkey was facing several foreign policy issues due to the
civil war in Syria, the war in Libya and the emergence of Islamic State
of Iraq and Syria (ISIS). As a result of the combined effects of these
variables, Turkey experienced a significant degree of political
uncertainty. Foreign investors started liquidating their holdings in
Turkey because they were concerned about the government's capacity to
handle the country's economic and foreign policy issues. The Turkish
currency and the Borsa Istanbul stock market both declined as a result
of this.</p>
<p>In May 2013, large scale protests broke out first in Istanbul and
then other cities in opposition to a government plan to renovate Taksim
district’s popular public space, Gezi Parkı. The effect of this can also
be observed in the decrease of the average stock price values after may.
The trend graph for the word “gezi” shows the huge increase in the
search amount around May 2013:</p>
<p>The 24th general elections of the Republic of Turkey were held on
June 7, 2015 to determine the new members of the Turkish Grand National
Assembly. The result of these elections can be a possible reason for the
decline of Akbank’s stock prices starting from June 2015. In these
elections, AKP, which had governed Turkey since 2002, lost its majority
in parliament for the first time. Due to this, investors sold up their
Turkish assets as the political and economic image in Turkey became
unstable.</p>
<h1
id="the-trend-for-the-word-genel-seçim-can-be-observed-in-the-following-graph">The
trend for the word “genel seçim” can be observed in the following
graph:</h1>
<p><br>
<img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image9.png" alt="" width="900" height="450"></p>
</div>
<div class="cell code"
data-vscode="{&quot;languageId&quot;:&quot;r&quot;}">
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Flag outliers based on the 3-sigma rule</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>akbank2yil <span class="op">&lt;-</span> akbank2yil <span class="op">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  left_join(monthly_summary, by <span class="op">=</span> c(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  mutate(outlier <span class="op">=</span> ifelse(AKBNK <span class="op">&lt;</span> (mean_value <span class="op">-</span> <span class="dv">3</span> <span class="op">*</span> sd_value) <span class="op">|</span> AKBNK <span class="op">&gt;</span> (mean_value <span class="op">+</span> <span class="dv">3</span> <span class="op">*</span> sd_value), <span class="st">&quot;Outlier&quot;</span>, <span class="st">&quot;Not Outlier&quot;</span>))</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>outliers_akbank <span class="op">&lt;-</span> akbank2yil[akbank2yil$outlier <span class="op">==</span> <span class="st">&quot;Outlier&quot;</span>, ]</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>outliers_akbank</span></code></pre></div>
</div>
<div class="cell code"
data-vscode="{&quot;languageId&quot;:&quot;r&quot;}">
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#GARAN</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming your DataFrame is named &quot;data&quot; and the timestamp column is named &quot;timestamp&quot;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>garan <span class="op">&lt;-</span> data[,c(<span class="st">&quot;timestamp&quot;</span>,<span class="st">&quot;GARAN&quot;</span>)]</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>garan2yil <span class="op">&lt;-</span> garan[<span class="dv">1883</span>:<span class="dv">22132</span>,]</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>garan2yil$GARAN <span class="op">&lt;-</span> na.approx(garan2yil$GARAN)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A function to approximate na&#39;s in data</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(<span class="kw">is</span>.na(garan2yil$timestamp))</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the month and year</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>garan2yil <span class="op">&lt;-</span> garan2yil <span class="op">%&gt;%</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  mutate(year <span class="op">=</span> year(timestamp), month <span class="op">=</span> month(timestamp))</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create separate boxplots for each combination of month and year</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>ggplot(garan2yil, aes(x <span class="op">=</span> factor(month, labels <span class="op">=</span> month.abb), y <span class="op">=</span> GARAN)) <span class="op">+</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  geom_boxplot() <span class="op">+</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  labs(x <span class="op">=</span> <span class="st">&quot;Month&quot;</span>, y <span class="op">=</span> <span class="st">&quot;GARAN&quot;</span>) <span class="op">+</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  facet_wrap(<span class="op">~</span>year, scales <span class="op">=</span> <span class="st">&quot;free_x&quot;</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming your DataFrame is named &quot;garan2yil&quot; with columns &quot;timestamp&quot; and &quot;GARAN&quot;</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>garan2yil <span class="op">&lt;-</span> garan2yil <span class="op">%&gt;%</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  mutate(timestamp <span class="op">=</span> ymd_hms(timestamp, tz <span class="op">=</span> <span class="st">&quot;UTC&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  mutate(year <span class="op">=</span> year(timestamp), month <span class="op">=</span> month(timestamp))</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by year and month, calculate mean and standard deviation</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>monthly_summary <span class="op">&lt;-</span> garan2yil <span class="op">%&gt;%</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  group_by(year, month, .groups <span class="op">=</span> <span class="st">&quot;drop&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  summarize(</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    mean_value <span class="op">=</span> mean(GARAN, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    sd_value <span class="op">=</span> sd(GARAN, na.rm <span class="op">=</span> TRUE)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Flag outliers based on the 3-sigma rule</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>garan2yil <span class="op">&lt;-</span> garan2yil <span class="op">%&gt;%</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>  left_join(monthly_summary, by <span class="op">=</span> c(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>  mutate(outlier <span class="op">=</span> ifelse(GARAN <span class="op">&lt;</span> (mean_value <span class="op">-</span> <span class="dv">3</span> <span class="op">*</span> sd_value) <span class="op">|</span> GARAN <span class="op">&gt;</span> (mean_value <span class="op">+</span> <span class="dv">3</span> <span class="op">*</span> sd_value), <span class="st">&quot;Outlier&quot;</span>, <span class="st">&quot;Not Outlier&quot;</span>))</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>outliers_garan <span class="op">&lt;-</span> garan2yil[garan2yil$outlier <span class="op">==</span> <span class="st">&quot;Outlier&quot;</span>, ]</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>outliers_garan</span></code></pre></div>
</div>
<section id="boxplots-for-garanti-for-january-2013-december-2015"
class="cell markdown">
<h1>Boxplots for Garanti for January 2013-December 2015:</h1>
<p><br>
<img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image8.png" alt="" width="900" height="450">
<br><br> The outliers and the decline at the end of 2013 in Garanti
stock prices can be explained by the reasons regarding the political and
economic uncertainties of Turkey around those times due to several
factors explained above.</p>
<p>The lower outliers in December 2014 can be explained by the sales of
the majority of the Garanti Bank's states to BBVA. In June 2023, BBVA,
one of the largest banks in Spain, acquired a 14.89% stake in Garanti
Bankası from Doğuş Group for 5 billion 497 million TL (2.5 billion
dollars). With this acquisition, BBVA increased its stake in Garanti
Bankası from 25.01% to 39.9% and became the majority shareholder in the
bank.</p>
<p>(<a
href="https://www.sozcu.com.tr/2014/ekonomi/dev-banka-satildi-652728/">[https://www.sozcu.com.tr/2014/ekonomi/dev-banka-satildi-652728/]{.underline}</a>)</p>
<h3
id="the-trend-for-the-word-xbank-which-refers-to-the-index-for-the-banking-sector-in-borsa-istanbul-can-be-observed-by-the-following-graph">The
trend for the word "xbank" which refers to the index for the banking
sector in Borsa Istanbul can be observed by the following graph:</h3>
<p><br></p>
<p><img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image4.png" alt="" width="900" height="450">
<br><br> The increase in the trend around the end of 2014 can be
explained by the sales of Garanti Bank's states to BBVA.</p>
</section>
<div class="cell code"
data-vscode="{&quot;languageId&quot;:&quot;r&quot;}">
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ASELS</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming your DataFrame is named &quot;data&quot; and the timestamp column is named &quot;timestamp&quot;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>asels <span class="op">&lt;-</span> data[,c(<span class="st">&quot;timestamp&quot;</span>,<span class="st">&quot;ASELS&quot;</span>)]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>asels2yil <span class="op">&lt;-</span> asels[<span class="dv">22134</span>:<span class="dv">45588</span>,]</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>asels2yil$ASELS <span class="op">&lt;-</span> na.approx(asels2yil$ASELS)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A function to approximate na&#39;s in data</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(<span class="kw">is</span>.na(asels2yil$timestamp))</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the month and year</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>asels2yil <span class="op">&lt;-</span> asels2yil <span class="op">%&gt;%</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  mutate(year <span class="op">=</span> year(timestamp), month <span class="op">=</span> month(timestamp))</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create separate boxplots for each combination of month and year</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>ggplot(asels2yil, aes(x <span class="op">=</span> factor(month, labels <span class="op">=</span> month.abb), y <span class="op">=</span> ASELS)) <span class="op">+</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  geom_boxplot() <span class="op">+</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  labs(x <span class="op">=</span> <span class="st">&quot;Month&quot;</span>, y <span class="op">=</span> <span class="st">&quot;ASELS&quot;</span>) <span class="op">+</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  facet_wrap(<span class="op">~</span>year, scales <span class="op">=</span> <span class="st">&quot;free_x&quot;</span>)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming your DataFrame is named &quot;asels2yil&quot; with columns &quot;timestamp&quot; and &quot;ASELS&quot;</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>asels2yil <span class="op">&lt;-</span> asels2yil <span class="op">%&gt;%</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  mutate(timestamp <span class="op">=</span> ymd_hms(timestamp, tz <span class="op">=</span> <span class="st">&quot;UTC&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  mutate(year <span class="op">=</span> year(timestamp), month <span class="op">=</span> month(timestamp))</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by year and month, calculate mean and standard deviation</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>monthly_summary <span class="op">&lt;-</span> asels2yil <span class="op">%&gt;%</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>  group_by(year, month, .groups <span class="op">=</span> <span class="st">&quot;drop&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>  summarize(</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    mean_value <span class="op">=</span> mean(ASELS, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    sd_value <span class="op">=</span> sd(ASELS, na.rm <span class="op">=</span> TRUE)</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Flag outliers based on the 3-sigma rule</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>asels2yil <span class="op">&lt;-</span> asels2yil <span class="op">%&gt;%</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>  left_join(monthly_summary, by <span class="op">=</span> c(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  mutate(outlier <span class="op">=</span> ifelse(ASELS <span class="op">&lt;</span> (mean_value <span class="op">-</span> <span class="dv">3</span> <span class="op">*</span> sd_value) <span class="op">|</span> ASELS <span class="op">&gt;</span> (mean_value <span class="op">+</span> <span class="dv">3</span> <span class="op">*</span> sd_value), <span class="st">&quot;Outlier&quot;</span>, <span class="st">&quot;Not Outlier&quot;</span>))</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>outliers_asels <span class="op">&lt;-</span> asels2yil[asels2yil$outlier <span class="op">==</span> <span class="st">&quot;Outlier&quot;</span>, ]</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>outliers_asels</span></code></pre></div>
</div>
<section id="boxplots-for-aselsan-for-january-2016-december-2018---"
class="cell markdown">
<h1>Boxplots for Aselsan for January 2016-December 2018: <br><br></h1>
<p><img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image2.png" alt="" width="900" height="450">
<br><br> In November 2017, Aselsan which develops technology, electronic
devices and systems for the defense industry became the most valuable
stock in Borsa İstanbul. This can be observed in the rapid increase in
the company's stock prices. The company won the title of the largest
public company by market value and replaced the banks that have been
sitting in the leadership chair in terms of market value for many years
in Borsa İstanbul.</p>
<p>(<a
href="https://www.bloomberght.com/haberler/haber/2069658-aselsan-borsa-istanbul-un-en-degerlisi-oldu">[https://www.bloomberght.com/haberler/haber/2069658-aselsan-borsa-istanbul-un-en-degerlisi-oldu]{.underline}</a>)</p>
<p>Being one of the top defense technology companies in Turkey,
Aselsan's rise to the top of Borsa Istanbul may be attributed to two
main factors: its outstanding performance and the increasing importance
of defense technology. The company has a strong track record of
innovation and developing new products and services. As a result,
Aselsan has been able to increase its revenue and profits and secure new
contracts. Government investment in the military has driven the
importance of defense technologies in the global economy. In recent
years, the Turkish government has prioritized the defense industry. As a
result, the government is now spending more on defense, which is
advantageous for Aselsan.</p>
<h3
id="the-increase-in-the-trends-for-the-word-aselsan-can-be-observed-in-the-following-graph-in-november-2017---">The
increase in the trends for the word "aselsan" can be observed in the
following graph in November 2017: <br><br></h3>
<p><img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image2.png" alt="" width="900" height="450">
<br><br></p>
</section>
<div class="cell code"
data-vscode="{&quot;languageId&quot;:&quot;r&quot;}">
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#PGSUS</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming your DataFrame is named &quot;data&quot; and the timestamp column is named &quot;timestamp&quot;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>pgsus <span class="op">&lt;-</span> data[,c(<span class="st">&quot;timestamp&quot;</span>,<span class="st">&quot;PGSUS&quot;</span>)]</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>pgsus2yil <span class="op">&lt;-</span> pgsus[<span class="dv">22134</span>:<span class="dv">45588</span>,]</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>pgsus2yil$PGSUS <span class="op">&lt;-</span> na.approx(pgsus2yil$PGSUS)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A function to approximate na&#39;s in data</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(<span class="kw">is</span>.na(pgsus2yil$timestamp))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the month and year</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>pgsus2yil <span class="op">&lt;-</span> pgsus2yil <span class="op">%&gt;%</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  mutate(year <span class="op">=</span> year(timestamp), month <span class="op">=</span> month(timestamp))</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create separate boxplots for each combination of month and year</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>ggplot(pgsus2yil, aes(x <span class="op">=</span> factor(month, labels <span class="op">=</span> month.abb), y <span class="op">=</span> PGSUS)) <span class="op">+</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  geom_boxplot() <span class="op">+</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  labs(x <span class="op">=</span> <span class="st">&quot;Month&quot;</span>, y <span class="op">=</span> <span class="st">&quot;PGSUS&quot;</span>) <span class="op">+</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  facet_wrap(<span class="op">~</span>year, scales <span class="op">=</span> <span class="st">&quot;free_x&quot;</span>)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming your DataFrame is named &quot;pgsus2yil&quot; with columns &quot;timestamp&quot; and &quot;PGSUS&quot;</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>pgsus2yil <span class="op">&lt;-</span> pgsus2yil <span class="op">%&gt;%</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  mutate(timestamp <span class="op">=</span> ymd_hms(timestamp, tz <span class="op">=</span> <span class="st">&quot;UTC&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  mutate(year <span class="op">=</span> year(timestamp), month <span class="op">=</span> month(timestamp))</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by year and month, calculate mean and standard deviation</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>monthly_summary <span class="op">&lt;-</span> pgsus2yil <span class="op">%&gt;%</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  group_by(year, month, .groups <span class="op">=</span> <span class="st">&quot;drop&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>  summarize(</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    mean_value <span class="op">=</span> mean(PGSUS, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    sd_value <span class="op">=</span> sd(PGSUS, na.rm <span class="op">=</span> TRUE)</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Flag outliers based on the 3-sigma rule</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>pgsus2yil <span class="op">&lt;-</span> pgsus2yil <span class="op">%&gt;%</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>  left_join(monthly_summary, by <span class="op">=</span> c(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>  mutate(outlier <span class="op">=</span> ifelse(PGSUS <span class="op">&lt;</span> (mean_value <span class="op">-</span> <span class="dv">3</span> <span class="op">*</span> sd_value) <span class="op">|</span> PGSUS <span class="op">&gt;</span> (mean_value <span class="op">+</span> <span class="dv">3</span> <span class="op">*</span> sd_value), <span class="st">&quot;Outlier&quot;</span>, <span class="st">&quot;Not Outlier&quot;</span>))</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>outliers_pgsus <span class="op">&lt;-</span> pgsus2yil[pgsus2yil$outlier <span class="op">==</span> <span class="st">&quot;Outlier&quot;</span>, ]</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>outliers_pgsus</span></code></pre></div>
</div>
<section id="boxplots-for-pegasus-for-january-2016-december-2018---"
class="cell markdown">
<h1>Boxplots for Pegasus for January 2016-December 2018: <br><br></h1>
<p><img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image6.png" alt="" width="900" height="450">
<br><br> On January 13, 2018, at Trabzon airport in Turkey, Pegasus
Airlines Flight, a Boeing 737-800, slid off the runway and partially
fell down a cliff. 6 crew members and 162 passengers were on board, and
every passenger was successfully evacuated. After being declared
unrepairable, the aircraft was signed off. Although the exact cause of
the accident remains under investigation, it is thought that a number of
variables, including pilot error, tailwind, and wet runway conditions,
played a role. Accident may have raised concerns about the safety of the
Pegasus airline and damaged its reputation. The low numbers of outliers
in the months of May, September and November are probably connected with
this incident.</p>
<p>The trend graph below showing the frequency of the search for words
"uçak kazası" matches with the above information. It has a steep
increase around November where a great number of outliers occur in the
above graph. <br> <br>
<img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image10.png" alt="" width="900" height="450">
<br><br></p>
</section>
<div class="cell code"
data-vscode="{&quot;languageId&quot;:&quot;r&quot;}">
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#THYAO</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming your DataFrame is named &quot;data&quot; and the timestamp column is named &quot;timestamp&quot;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>thyao <span class="op">&lt;-</span> data[,c(<span class="st">&quot;timestamp&quot;</span>,<span class="st">&quot;THYAO&quot;</span>)]</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>thyao2yil <span class="op">&lt;-</span> thyao[<span class="dv">22134</span>:<span class="dv">45588</span>,]</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>thyao2yil$THYAO <span class="op">&lt;-</span> na.approx(thyao2yil$THYAO)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A function to approximate na&#39;s in data</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(<span class="kw">is</span>.na(thyao2yil$timestamp))</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the month and year</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>thyao2yil <span class="op">&lt;-</span> thyao2yil <span class="op">%&gt;%</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  mutate(year <span class="op">=</span> year(timestamp), month <span class="op">=</span> month(timestamp))</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create separate boxplots for each combination of month and year</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>ggplot(thyao2yil, aes(x <span class="op">=</span> factor(month, labels <span class="op">=</span> month.abb), y <span class="op">=</span> THYAO)) <span class="op">+</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  geom_boxplot() <span class="op">+</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  labs(x <span class="op">=</span> <span class="st">&quot;Month&quot;</span>, y <span class="op">=</span> <span class="st">&quot;THYAO&quot;</span>) <span class="op">+</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  facet_wrap(<span class="op">~</span>year, scales <span class="op">=</span> <span class="st">&quot;free_x&quot;</span>)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming your DataFrame is named &quot;thyao2yil&quot; with columns &quot;timestamp&quot; and &quot;THYAO&quot;</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>thyao2yil <span class="op">&lt;-</span> thyao2yil <span class="op">%&gt;%</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  mutate(timestamp <span class="op">=</span> ymd_hms(timestamp, tz <span class="op">=</span> <span class="st">&quot;UTC&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  mutate(year <span class="op">=</span> year(timestamp), month <span class="op">=</span> month(timestamp))</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by year and month, calculate mean and standard deviation</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>monthly_summary <span class="op">&lt;-</span> thyao2yil <span class="op">%&gt;%</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  group_by(year, month, .groups <span class="op">=</span> <span class="st">&quot;drop&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>  summarize(</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>    mean_value <span class="op">=</span> mean(THYAO, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    sd_value <span class="op">=</span> sd(THYAO, na.rm <span class="op">=</span> TRUE)</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Flag outliers based on the 3-sigma rule</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>thyao2yil <span class="op">&lt;-</span> thyao2yil <span class="op">%&gt;%</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>  left_join(monthly_summary, by <span class="op">=</span> c(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  mutate(outlier <span class="op">=</span> ifelse(THYAO <span class="op">&lt;</span> (mean_value <span class="op">-</span> <span class="dv">3</span> <span class="op">*</span> sd_value) <span class="op">|</span> THYAO <span class="op">&gt;</span> (mean_value <span class="op">+</span> <span class="dv">3</span> <span class="op">*</span> sd_value), <span class="st">&quot;Outlier&quot;</span>, <span class="st">&quot;Not Outlier&quot;</span>))</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>outliers_thyao <span class="op">&lt;-</span> thyao2yil[thyao2yil$outlier <span class="op">==</span> <span class="st">&quot;Outlier&quot;</span>, ]</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>outliers_thyao</span></code></pre></div>
</div>
<section id="boxplots-for-thy-for-january-2016-december-2018---"
class="cell markdown">
<h1>Boxplots for THY for January 2016-December 2018: <br><br></h1>
<p><img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image1.png" alt="" width="900" height="450">
<br><br> The total number of passengers, including domestic and
international flights, which was 173,743,537 in 2016, increased by 11.1%
to reach 193,045,343 in 2017. In 2017, Turkish Airlines (including
Anadolu Jet) served 56% of the domestic passenger market. The increase
in the stock prices of THY can be explained by these factors. The
elements that contributed to THY's stock price growth included the
company's expansion plans, solid financial performance, dominance of the
domestic passenger market, and strong demand for its services.</p>
<p>(<a
href="https://www.dhmi.gov.tr/Lists/HavaYoluSektorRaporlari/Attachments/11/2017%20Sekt%C3%B6r%20Raporu.pdf">[https://www.dhmi.gov.tr/Lists/HavaYoluSektorRaporlari/Attachments/11/2017%20Sekt%C3%B6r%20Raporu.pdf]{.underline}</a>)</p>
<p>In addition to that, the high values of outliers in the box plot for
THY in February 2018 can be explained by the accident of Pegasus flight
in January 2018. This event has potentially a positive effect on the
sudden increase of the stock prices of THY in February. <br><br>
<img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image14.png" alt="" width="900" height="450">
<br><br> The fluctuating value for the stock prices of THY during 2018
can also be observed in fluctuations in the search amount of THY during
that year.</p>
</section>
<div class="cell code"
data-vscode="{&quot;languageId&quot;:&quot;r&quot;}">
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#BANVT</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming your DataFrame is named &quot;data&quot; and the timestamp column is named &quot;timestamp&quot;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>banvt <span class="op">&lt;-</span> data[,c(<span class="st">&quot;timestamp&quot;</span>,<span class="st">&quot;BANVT&quot;</span>)]</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>banvt2yil <span class="op">&lt;-</span> banvt[<span class="dv">22134</span>:<span class="dv">45588</span>,]</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>banvt2yil$BANVT <span class="op">&lt;-</span> na.approx(banvt2yil$BANVT)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A function to approximate na&#39;s in data</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(<span class="kw">is</span>.na(banvt2yil$timestamp))</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the month and year</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>banvt2yil <span class="op">&lt;-</span> banvt2yil <span class="op">%&gt;%</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  mutate(year <span class="op">=</span> year(timestamp), month <span class="op">=</span> month(timestamp))</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create separate boxplots for each combination of month and year</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>ggplot(banvt2yil, aes(x <span class="op">=</span> factor(month, labels <span class="op">=</span> month.abb), y <span class="op">=</span> BANVT)) <span class="op">+</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  geom_boxplot() <span class="op">+</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  labs(x <span class="op">=</span> <span class="st">&quot;Month&quot;</span>, y <span class="op">=</span> <span class="st">&quot;BANVT&quot;</span>) <span class="op">+</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  facet_wrap(<span class="op">~</span>year, scales <span class="op">=</span> <span class="st">&quot;free_x&quot;</span>)</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming your DataFrame is named &quot;banvt2yil&quot; with columns &quot;timestamp&quot; and &quot;BANVT&quot;</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>banvt2yil <span class="op">&lt;-</span> banvt2yil <span class="op">%&gt;%</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  mutate(timestamp <span class="op">=</span> ymd_hms(timestamp, tz <span class="op">=</span> <span class="st">&quot;UTC&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  mutate(year <span class="op">=</span> year(timestamp), month <span class="op">=</span> month(timestamp))</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by year and month, calculate mean and standard deviation</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>monthly_summary <span class="op">&lt;-</span> banvt2yil <span class="op">%&gt;%</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  group_by(year, month, .groups <span class="op">=</span> <span class="st">&quot;drop&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  summarize(</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>    mean_value <span class="op">=</span> mean(BANVT, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>    sd_value <span class="op">=</span> sd(BANVT, na.rm <span class="op">=</span> TRUE)</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Flag outliers based on the 3-sigma rule</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>banvt2yil <span class="op">&lt;-</span> banvt2yil <span class="op">%&gt;%</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>  left_join(monthly_summary, by <span class="op">=</span> c(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>  mutate(outlier <span class="op">=</span> ifelse(BANVT <span class="op">&lt;</span> (mean_value <span class="op">-</span> <span class="dv">3</span> <span class="op">*</span> sd_value) <span class="op">|</span> BANVT <span class="op">&gt;</span> (mean_value <span class="op">+</span> <span class="dv">3</span> <span class="op">*</span> sd_value), <span class="st">&quot;Outlier&quot;</span>, <span class="st">&quot;Not Outlier&quot;</span>))</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>outliers_banvt <span class="op">&lt;-</span> banvt2yil[banvt2yil$outlier <span class="op">==</span> <span class="st">&quot;Outlier&quot;</span>, ]</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>outliers_banvt</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</div>
<section id="boxplots-for-banvit-for-january-2016-december-2018---"
class="cell markdown">
<h1>Boxplots for Banvit for January 2016-December 2018: <br><br></h1>
<p><img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image15.png" alt="" width="900" height="450">
<br><br> The rising bird flu news from different parts of the world in
2018 may have caused a decline in Banvit's stock market values through
the middle of 2018. The outbreak was caused by a virus, which is highly
contagious and can be deadly to birds. The virus is thought to have
originated in China and then spread to other parts of the world through
the movement of poultry and wild birds. The outbreak also raised
concerns about the potential for human infection. In 2018, there were
over 850 cases of human infection with avian influenza A(H5N6) virus
reported worldwide, of which over 450 were fatal.</p>
<p>(<a
href="https://www.woah.org/app/uploads/2022/03/awada-et-al-2018-transboundary-and-emerging-diseases-2.pdf">[https://www.woah.org/app/uploads/2022/03/awada-et-al-2018-transboundary-and-emerging-diseases-2.pdf]{.underline}</a>)
<br><br>
<img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image11.png" alt="" width="900" height="450">
<br><br> The trend chart for the search of "kuş gribi" is in accordance
with the steep decrease in the stock prices of Banvit. The search for
bird flu increased in the first months of 2018 and the stock prices
started to decrease significantly right after January 2018.</p>
<p>The low values of outliers that are observed in September 2018 in the
stock prices of Banvit might be related with the food crisis in the
world going on at those times. The 2019 Global Report on Food Crises
estimates that 113 million people in 53 countries suffered from acute
hunger in 2018 to a level where they needed immediate humanitarian help.
Due to the global food crisis, higher input costs, supply chain
disruptions, and investor sentiment could weigh on the stock prices of
Banvit. The decrease in stock prices of Banvit through 2018 might also
be related to this fact.</p>
<p>(<a
href="https://www.ifpri.org/blog/global-report-food-crises-113-million-people-53-countries-experienced-acute-hunger-2018#:~:text=In%202018%2C%20an%20estimated%20113,people%2C%20it%20remains%20unacceptably%20high">[https://www.ifpri.org/blog/global-report-food-crises-113-million-people-53-countries-experienced-acute-hunger-2018#:~:text=In%202018%2C%20an%20estimated%20113,people%2C%20it%20remains%20unacceptably%20high]{.underline}</a>.)<br><br>
<br><img src="vertopal_49e01ea4fd1c43be8472c3b2a7b16a63/media/image13.png" alt="" width="900" height="450">
<br><br></p>
<p>The increase in the frequency of the search for the term "gıda krizi"
in the first months of 2018 is in accordance with the decreasing stock
price values of Banvit in the first half of 2018.</p>
</section>
<section id="conclusion" class="cell markdown">
<h1><strong>Conclusion</strong></h1>
<p>In order to see the correlations between anomalies in various stocks
we need to consider general events that have the possibility to
influence the prices of those stocks directly or indirectly through the
economic and political conditions in Turkey. For the banking sector, box
plots of Akbank and Garanti show a similar pattern between January
2013-December 2015: the prices follow a decreasing trend in the second
half of 2013, then an increasing trend after the first months of 2014
and finally a decreasing trend towards the end of 2015. The outliers are
also observed at similar time periods: both Garanti and Akbank have low
valued outliers at the end of 2013 and 2014, around June 2015, and late
2015. Since these two firms are both functioning in the banking industry
in Turkey, it is not surprising that they are affected in a similar way
from the worldwide financial crisis, Turkey's instability in politics,
and the lira's depreciation in value.</p>
<p>The outliers in Aselsan and Pegasus stock prices in the middle of
2018 also show a correlation. A possible event that might have caused a
great number of outliers for the stock prices of both companies is the
general election of 24 June 2018 that was held to elect the president of
Turkey. The elections were originally scheduled for 3 November 2019,
however the government declared on 18 April 2018 that there will be an
early election. A possible impact of this early call is a decrease in
the stock prices which can be seen in the box plot diagrams of Aselsan,
Pegasus and also THY. For all three of these firms, the stock prices
show a steep decrease right after April 2018.</p>
</section>
</body>
</html>
